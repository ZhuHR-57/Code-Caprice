# 数组

## 二分查找

> 适合：**有序数组**
>
> **难点**：
>
> 1. 中间值等号部分的处理

```c
// [a , b] 左闭右闭
high = len(nums) - 1;
while(low <= high){ high = mid - 1 }

// [a , b) 左闭右开
high = len(nums);
while(low < high){ high = mid }
```

> 2. 防止溢出

```c
int middle = left + ((right - left) / 2);
```

> 3. 寻找相同元素的左右边界
>
> **难点**：若遇到相同元素后的位置判断
>
> + 判断是否是最左边的元素：
>   + 如果是0，则必然是最左边的元素
>   + 如果再往左移动一位则不是相同元素，也说明是最左的元素

```go
func getRightBorder(nums []int, target int) int {

    low,high := 0,len(nums)-1
    var mid int
   

    for low <= high {
        mid = low + ((high - low)/2)
        
        if nums[mid] == target{
            // 判断是否在最右边
            // 1. 如果是最右边元素，那肯定是最右边的
            // 2. 或者下一个元素不再是target，那也说明是最后一个元素
            if mid == len(nums) - 1 || nums[mid + 1] != target{
                return mid
            }else{
                low = mid + 1
            }
        }else if nums[mid] > target{
            high = mid - 1
        }else {
            low = mid + 1
        }
    }
    
    return -2
}
```

> 3. 开平方
>
> **难点**：mid == x/mid（这个比较难想到）

```go
func mySqrt(x int) int {
    
    if x == 0 || x == 1{
        return x
    }

    low,high := 0,x // 这里不能是x/2,因为可能会使mid = 0，出现分母为0异常
    var mid int

    for low <= high {
        mid = low + ((high - low)/2)
        if mid == x/mid{
            return mid
        }else if mid > x/mid{
            high = mid - 1
        }else{
            low = mid + 1
        }
    } 
    
    return high
}
```

$\sqrt{x}=x^{\frac{1}{2}}=e^{\frac{1}{2}lnx}$，算术运算法

```go
ans := int(math.Exp(0.5*math.Log(float64(x))))
if ans*ans == num || (ans+1)*(ans+1) == num{
    return true
}
```

